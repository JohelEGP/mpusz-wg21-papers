<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang xml:lang>
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="mpark/wg21" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="dcterms.date" content="2023-10-09" />
  <title>`std::quantity` as a numeric type</title>
  <style>
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
      div.csl-block{margin-left: 1.5em;}
      ul.task-list{list-style: none;}
      pre > code.sourceCode { white-space: pre; position: relative; }
      pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
      pre > code.sourceCode > span:empty { height: 1.2em; }
      .sourceCode { overflow: visible; }
      code.sourceCode > span { color: inherit; text-decoration: inherit; }
      div.sourceCode { margin: 1em 0; }
      pre.sourceCode { margin: 0; }
      @media screen {
      div.sourceCode { overflow: auto; }
      }
      @media print {
      pre > code.sourceCode { white-space: pre-wrap; }
      pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
      }
      pre.numberSource code
        { counter-reset: source-line 0; }
      pre.numberSource code > span
        { position: relative; left: -4em; counter-increment: source-line; }
      pre.numberSource code > span > a:first-child::before
        { content: counter(source-line);
          position: relative; left: -1em; text-align: right; vertical-align: baseline;
          border: none; display: inline-block;
          -webkit-touch-callout: none; -webkit-user-select: none;
          -khtml-user-select: none; -moz-user-select: none;
          -ms-user-select: none; user-select: none;
          padding: 0 4px; width: 4em;
          color: #aaaaaa;
        }
      pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
      div.sourceCode
        {  background-color: #f6f8fa; }
      @media screen {
      pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
      }
      code span { } /* Normal */
      code span.al { color: #ff0000; } /* Alert */
      code span.an { } /* Annotation */
      code span.at { } /* Attribute */
      code span.bn { color: #9f6807; } /* BaseN */
      code span.bu { color: #9f6807; } /* BuiltIn */
      code span.cf { color: #00607c; } /* ControlFlow */
      code span.ch { color: #9f6807; } /* Char */
      code span.cn { } /* Constant */
      code span.co { color: #008000; font-style: italic; } /* Comment */
      code span.cv { color: #008000; font-style: italic; } /* CommentVar */
      code span.do { color: #008000; } /* Documentation */
      code span.dt { color: #00607c; } /* DataType */
      code span.dv { color: #9f6807; } /* DecVal */
      code span.er { color: #ff0000; font-weight: bold; } /* Error */
      code span.ex { } /* Extension */
      code span.fl { color: #9f6807; } /* Float */
      code span.fu { } /* Function */
      code span.im { } /* Import */
      code span.in { color: #008000; } /* Information */
      code span.kw { color: #00607c; } /* Keyword */
      code span.op { color: #af1915; } /* Operator */
      code span.ot { } /* Other */
      code span.pp { color: #6f4e37; } /* Preprocessor */
      code span.re { } /* RegionMarker */
      code span.sc { color: #9f6807; } /* SpecialChar */
      code span.ss { color: #9f6807; } /* SpecialString */
      code span.st { color: #9f6807; } /* String */
      code span.va { } /* Variable */
      code span.vs { color: #9f6807; } /* VerbatimString */
      code span.wa { color: #008000; font-weight: bold; } /* Warning */
      code.diff {color: #898887}
      code.diff span.va {color: #006e28}
      code.diff span.st {color: #bf0303}
  </style>
  <style type="text/css">
body {
margin: 5em;
font-family: serif;

hyphens: auto;
line-height: 1.35;
text-align: justify;
}
@media screen and (max-width: 30em) {
body {
margin: 1.5em;
}
}
div.wrapper {
max-width: 60em;
margin: auto;
}
ul {
list-style-type: none;
padding-left: 2em;
margin-top: -0.2em;
margin-bottom: -0.2em;
}
a {
text-decoration: none;
color: #4183C4;
}
a.hidden_link {
text-decoration: none;
color: inherit;
}
li {
margin-top: 0.6em;
margin-bottom: 0.6em;
}
h1, h2, h3, h4 {
position: relative;
line-height: 1;
}
a.self-link {
position: absolute;
top: 0;
left: calc(-1 * (3.5rem - 26px));
width: calc(3.5rem - 26px);
height: 2em;
text-align: center;
border: none;
transition: opacity .2s;
opacity: .5;
font-family: sans-serif;
font-weight: normal;
font-size: 83%;
}
a.self-link:hover { opacity: 1; }
a.self-link::before { content: "§"; }
ul > li:before {
content: "\2014";
position: absolute;
margin-left: -1.5em;
}
:target { background-color: #C9FBC9; }
:target .codeblock { background-color: #C9FBC9; }
:target ul { background-color: #C9FBC9; }
.abbr_ref { float: right; }
.folded_abbr_ref { float: right; }
:target .folded_abbr_ref { display: none; }
:target .unfolded_abbr_ref { float: right; display: inherit; }
.unfolded_abbr_ref { display: none; }
.secnum { display: inline-block; min-width: 35pt; }
.header-section-number { display: inline-block; min-width: 35pt; }
.annexnum { display: block; }
div.sourceLinkParent {
float: right;
}
a.sourceLink {
position: absolute;
opacity: 0;
margin-left: 10pt;
}
a.sourceLink:hover {
opacity: 1;
}
a.itemDeclLink {
position: absolute;
font-size: 75%;
text-align: right;
width: 5em;
opacity: 0;
}
a.itemDeclLink:hover { opacity: 1; }
span.marginalizedparent {
position: relative;
left: -5em;
}
li span.marginalizedparent { left: -7em; }
li ul > li span.marginalizedparent { left: -9em; }
li ul > li ul > li span.marginalizedparent { left: -11em; }
li ul > li ul > li ul > li span.marginalizedparent { left: -13em; }
div.footnoteNumberParent {
position: relative;
left: -4.7em;
}
a.marginalized {
position: absolute;
font-size: 75%;
text-align: right;
width: 5em;
}
a.enumerated_item_num {
position: relative;
left: -3.5em;
display: inline-block;
margin-right: -3em;
text-align: right;
width: 3em;
}
div.para { margin-bottom: 0.6em; margin-top: 0.6em; text-align: justify; }
div.section { text-align: justify; }
div.sentence { display: inline; }
span.indexparent {
display: inline;
position: relative;
float: right;
right: -1em;
}
a.index {
position: absolute;
display: none;
}
a.index:before { content: "⟵"; }

a.index:target {
display: inline;
}
.indexitems {
margin-left: 2em;
text-indent: -2em;
}
div.itemdescr {
margin-left: 3em;
}
.bnf {
font-family: serif;
margin-left: 40pt;
margin-top: 0.5em;
margin-bottom: 0.5em;
}
.ncbnf {
font-family: serif;
margin-top: 0.5em;
margin-bottom: 0.5em;
margin-left: 40pt;
}
.ncsimplebnf {
font-family: serif;
font-style: italic;
margin-top: 0.5em;
margin-bottom: 0.5em;
margin-left: 40pt;
background: inherit; 
}
span.textnormal {
font-style: normal;
font-family: serif;
white-space: normal;
display: inline-block;
}
span.rlap {
display: inline-block;
width: 0px;
}
span.descr { font-style: normal; font-family: serif; }
span.grammarterm { font-style: italic; }
span.term { font-style: italic; }
span.terminal { font-family: monospace; font-style: normal; }
span.nonterminal { font-style: italic; }
span.tcode { font-family: monospace; font-style: normal; }
span.textbf { font-weight: bold; }
span.textsc { font-variant: small-caps; }
a.nontermdef { font-style: italic; font-family: serif; }
span.emph { font-style: italic; }
span.techterm { font-style: italic; }
span.mathit { font-style: italic; }
span.mathsf { font-family: sans-serif; }
span.mathrm { font-family: serif; font-style: normal; }
span.textrm { font-family: serif; }
span.textsl { font-style: italic; }
span.mathtt { font-family: monospace; font-style: normal; }
span.mbox { font-family: serif; font-style: normal; }
span.ungap { display: inline-block; width: 2pt; }
span.textit { font-style: italic; }
span.texttt { font-family: monospace; }
span.tcode_in_codeblock { font-family: monospace; font-style: normal; }
span.phantom { color: white; }

span.math { font-style: normal; }
span.mathblock {
display: block;
margin-left: auto;
margin-right: auto;
margin-top: 1.2em;
margin-bottom: 1.2em;
text-align: center;
}
span.mathalpha {
font-style: italic;
}
span.synopsis {
font-weight: bold;
margin-top: 0.5em;
display: block;
}
span.definition {
font-weight: bold;
display: block;
}
.codeblock {
margin-left: 1.2em;
line-height: 127%;
}
.outputblock {
margin-left: 1.2em;
line-height: 127%;
}
div.itemdecl {
margin-top: 2ex;
}
code.itemdeclcode {
white-space: pre;
display: block;
}
span.textsuperscript {
vertical-align: super;
font-size: smaller;
line-height: 0;
}
.footnotenum { vertical-align: super; font-size: smaller; line-height: 0; }
.footnote {
font-size: small;
margin-left: 2em;
margin-right: 2em;
margin-top: 0.6em;
margin-bottom: 0.6em;
}
div.minipage {
display: inline-block;
margin-right: 3em;
}
div.numberedTable {
text-align: center;
margin: 2em;
}
div.figure {
text-align: center;
margin: 2em;
}
table {
border: 1px solid black;
border-collapse: collapse;
margin-left: auto;
margin-right: auto;
margin-top: 0.8em;
text-align: left;
hyphens: none; 
}
td, th {
padding-left: 1em;
padding-right: 1em;
vertical-align: top;
}
td.empty {
padding: 0px;
padding-left: 1px;
}
td.left {
text-align: left;
}
td.right {
text-align: right;
}
td.center {
text-align: center;
}
td.justify {
text-align: justify;
}
td.border {
border-left: 1px solid black;
}
tr.rowsep, td.cline {
border-top: 1px solid black;
}
tr.even, tr.odd {
border-bottom: 1px solid black;
}
tr.capsep {
border-top: 3px solid black;
border-top-style: double;
}
tr.header {
border-bottom: 3px solid black;
border-bottom-style: double;
}
th {
border-bottom: 1px solid black;
}
span.centry {
font-weight: bold;
}
div.table {
display: block;
margin-left: auto;
margin-right: auto;
text-align: center;
width: 90%;
}
span.indented {
display: block;
margin-left: 2em;
margin-bottom: 1em;
margin-top: 1em;
}
ol.enumeratea { list-style-type: none; background: inherit; }
ol.enumerate { list-style-type: none; background: inherit; }

code.sourceCode > span { display: inline; }
</style>
  <link href="data:image/x-icon;base64,AAABAAIAEBAAAAEAIABoBAAAJgAAACAgAAABACAAqBAAAI4EAAAoAAAAEAAAACAAAAABACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AIJEAACCRAAAgkQAAIJEAACCRAAAgkQAVoJEAN6CRADegkQAWIJEAACCRAAAgkQAAIJEAACCRAAA////AP///wCCRAAAgkQAAIJEAACCRAAsgkQAvoJEAP+CRAD/gkQA/4JEAP+CRADAgkQALoJEAACCRAAAgkQAAP///wD///8AgkQAAIJEABSCRACSgkQA/IJEAP99PQD/dzMA/3czAP99PQD/gkQA/4JEAPyCRACUgkQAFIJEAAD///8A////AHw+AFiBQwDqgkQA/4BBAP9/PxP/uZd6/9rJtf/bybX/upd7/39AFP+AQQD/gkQA/4FDAOqAQgBc////AP///wDKklv4jlEa/3o7AP+PWC//8+3o///////////////////////z7un/kFox/35AAP+GRwD/mVYA+v///wD///8A0Zpk+NmibP+0d0T/8evj///////+/fv/1sKz/9bCs//9/fr//////+/m2/+NRwL/nloA/5xYAPj///8A////ANKaZPjRmGH/5cKh////////////k149/3UwAP91MQD/lmQ//86rhv+USg3/m1YA/5hSAP+bVgD4////AP///wDSmmT4zpJY/+/bx///////8+TV/8mLT/+TVx//gkIA/5lVAP+VTAD/x6B//7aEVv/JpH7/s39J+P///wD///8A0ppk+M6SWP/u2sf///////Pj1f/Nj1T/2KFs/8mOUv+eWhD/lEsA/8aee/+0glT/x6F7/7J8Rvj///8A////ANKaZPjRmGH/48Cf///////+/v7/2qt//82PVP/OkFX/37KJ/86siv+USg7/mVQA/5hRAP+bVgD4////AP///wDSmmT40ppk/9CVXP/69O////////7+/v/x4M//8d/P//7+/f//////9u7n/6tnJf+XUgD/nFgA+P///wD///8A0ppk+NKaZP/RmWL/1qNy//r07///////////////////////+vXw/9akdP/Wnmn/y5FY/6JfFvj///8A////ANKaZFTSmmTo0ppk/9GYYv/Ql1//5cWm//Hg0P/x4ND/5cWm/9GXYP/RmGH/0ppk/9KaZOjVnmpY////AP///wDSmmQA0ppkEtKaZI7SmmT60ppk/9CWX//OkVb/zpFW/9CWX//SmmT/0ppk/NKaZJDSmmQS0ppkAP///wD///8A0ppkANKaZADSmmQA0ppkKtKaZLrSmmT/0ppk/9KaZP/SmmT/0ppkvNKaZCrSmmQA0ppkANKaZAD///8A////ANKaZADSmmQA0ppkANKaZADSmmQA0ppkUtKaZNzSmmTc0ppkVNKaZADSmmQA0ppkANKaZADSmmQA////AP5/AAD4HwAA4AcAAMADAACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAMADAADgBwAA+B8AAP5/AAAoAAAAIAAAAEAAAAABACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA////AP///wCCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAAyCRACMgkQA6oJEAOqCRACQgkQAEIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAA////AP///wD///8A////AIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRABigkQA5oJEAP+CRAD/gkQA/4JEAP+CRADqgkQAZoJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAAD///8A////AP///wD///8AgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAA4gkQAwoJEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAP+CRAD/gkQAxIJEADyCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAAgkQAAP///wD///8A////AP///wCCRAAAgkQAAIJEAACCRAAAgkQAAIJEAACCRAAWgkQAmIJEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAJyCRAAYgkQAAIJEAACCRAAAgkQAAIJEAACCRAAA////AP///wD///8A////AIJEAACCRAAAgkQAAIJEAACCRAAAgkQAdIJEAPCCRAD/gkQA/4JEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAP+CRAD/gkQA/4JEAPSCRAB4gkQAAIJEAACCRAAAgkQAAIJEAAD///8A////AP///wD///8AgkQAAIJEAACCRAAAgkQASoJEANKCRAD/gkQA/4JEAP+CRAD/g0YA/39AAP9zLgD/bSQA/2shAP9rIQD/bSQA/3MuAP9/PwD/g0YA/4JEAP+CRAD/gkQA/4JEAP+CRADUgkQAToJEAACCRAAAgkQAAP///wD///8A////AP///wB+PwAAgkUAIoJEAKiCRAD/gkQA/4JEAP+CRAD/hEcA/4BBAP9sIwD/dTAA/5RfKv+viF7/vp56/76ee/+wiF7/lWAr/3YxAP9sIwD/f0AA/4RHAP+CRAD/gkQA/4JEAP+CRAD/gkQArIJEACaBQwAA////AP///wD///8A////AIBCAEBzNAD6f0EA/4NFAP+CRAD/gkQA/4VIAP92MwD/bSUA/6N1Tv/ezsL/////////////////////////////////38/D/6V3Uv9uJgD/dTEA/4VJAP+CRAD/gkQA/4JEAP+BQwD/fUAA/4FDAEj///8A////AP///wD///8AzJRd5qBlKf91NgD/dDUA/4JEAP+FSQD/cy4A/3YyAP/PuKP//////////////////////////////////////////////////////9K7qP94NQD/ciwA/4VJAP+CRAD/fkEA/35BAP+LSwD/mlYA6v///wD///8A////AP///wDdpnL/4qx3/8KJUv+PUhf/cTMA/3AsAP90LgD/4dK+/////////////////////////////////////////////////////////////////+TYxf91MAD/dTIA/31CAP+GRwD/llQA/6FcAP+gWwD8////AP///wD///8A////ANGZY/LSm2X/4ap3/92mcP+wdT3/byQA/8mwj////////////////////////////////////////////////////////////////////////////+LYxv9zLgP/jUoA/59bAP+hXAD/nFgA/5xYAPL///8A////AP///wD///8A0ppk8tKaZP/RmWL/1p9q/9ubXv/XqXj////////////////////////////7+fD/vZyG/6BxS/+gcUr/vJuE//r37f//////////////////////3MOr/5dQBf+dVQD/nVkA/5xYAP+cWAD/nFgA8v///wD///8A////AP///wDSmmTy0ppk/9KaZP/SmWP/yohJ//jo2P//////////////////////4NTG/4JDFf9lGAD/bSQA/20kAP9kGAD/fz8S/+Xb0f//////5NG9/6txN/+LOgD/m1QA/51aAP+cWAD/m1cA/5xYAP+cWADy////AP///wD///8A////ANKaZPLSmmT/0ppk/8+TWf/Unmv//v37//////////////////////+TWRr/VwsA/35AAP+ERgD/g0UA/4JGAP9lHgD/kFga/8KXX/+TRwD/jT4A/49CAP+VTQD/n10A/5xYAP+OQQD/lk4A/55cAPL///8A////AP///wD///8A0ppk8tKaZP/SmmT/y4tO/92yiP//////////////////////8NnE/8eCQP+rcTT/ez0A/3IyAP98PgD/gEMA/5FSAP+USwD/jj8A/5lUAP+JNwD/yqV2/694Mf+HNQD/jkAA/82rf/+laBj/jT4A8v///wD///8A////AP///wDSmmTy0ppk/9KaZP/LiUr/4byY///////////////////////gupX/0I5P/+Wuev/Lklz/l1sj/308AP+QSwD/ol0A/59aAP+aVQD/k0oA/8yoh///////+fXv/6pwO//Lp3v///////Pr4f+oay7y////AP///wD///8A////ANKaZPLSmmT/0ppk/8uJSv/hvJj//////////////////////+G7l//Jhkb/0ppk/96nc//fqXX/x4xO/6dkFP+QSQD/llEA/5xXAP+USgD/yaOA///////38uv/qG05/8ijdv//////8efb/6ZpLPL///8A////AP///wD///8A0ppk8tKaZP/SmmT/zIxO/9yxh///////////////////////7dbA/8iEQf/Sm2X/0Zlj/9ScZv/eqHf/2KJv/7yAQf+XTgD/iToA/5lSAP+JNgD/yKFv/611LP+HNQD/jT8A/8qmeP+kZRT/jT4A8v///wD///8A////AP///wDSmmTy0ppk/9KaZP/Pk1n/1J5q//78+//////////////////+/fv/1aFv/8iEQv/Tm2b/0ppl/9GZY//Wn2z/1pZc/9eldf/Bl2b/kUcA/4w9AP+OQAD/lUwA/59eAP+cWQD/jT8A/5ZOAP+eXADy////AP///wD///8A////ANKaZPLSmmT/0ppk/9KZY//KiEn/8d/P///////////////////////47+f/05tm/8iCP//KiEj/yohJ/8eCP//RmGH//vfy///////n1sP/rXQ7/4k4AP+TTAD/nVoA/5xYAP+cVwD/nFgA/5xYAPL///8A////AP///wD///8A0ppk8tKaZP/SmmT/0ptl/8uLTf/aq37////////////////////////////+/fz/6c2y/961jv/etY7/6Myx//78+v//////////////////////3MWv/5xXD/+ORAD/mFQA/51ZAP+cWAD/nFgA8v///wD///8A////AP///wDSmmTy0ppk/9KaZP/SmmT/0ppk/8mFRP/s1b//////////////////////////////////////////////////////////////////////////////+PD/0JFU/7NzMv+WUQD/kUsA/5tXAP+dWQDy////AP///wD///8A////ANKaZP/SmmT/0ppk/9KaZP/Sm2X/z5NZ/8yMT//z5NX/////////////////////////////////////////////////////////////////9Ofa/8yNUP/UmGH/36p5/8yTWv+qaSD/kksA/5ROAPz///8A////AP///wD///8A0ppk5NKaZP/SmmT/0ppk/9KaZP/TnGf/zY9T/82OUv/t1sD//////////////////////////////////////////////////////+7Yw//OkFX/zI5R/9OcZ//SmmP/26V0/9ymdf/BhUf/ol8R6P///wD///8A////AP///wDSmmQ80ppk9tKaZP/SmmT/0ppk/9KaZP/TnGj/zpFW/8qJSv/dson/8uHS//////////////////////////////////Lj0//etIv/y4lL/86QVf/TnGj/0ppk/9KaZP/RmWP/05xn/9ymdfjUnWdC////AP///wD///8A////ANKaZADSmmQc0ppkotKaZP/SmmT/0ppk/9KaZP/Tm2b/0Zli/8qJSf/NjlH/16Z3/+G8mP/myKr/5siq/+G8mP/Xp3f/zY5S/8qISf/RmGH/05tm/9KaZP/SmmT/0ppk/9KaZP/SmmSm0pljINWdaQD///8A////AP///wD///8A0ppkANKaZADSmmQA0ppkQtKaZMrSmmT/0ppk/9KaZP/SmmT/0ptl/9GYYf/Nj1P/y4lL/8qISP/KiEj/y4lK/82PU//RmGH/0ptl/9KaZP/SmmT/0ppk/9KaZP/SmmTO0ppkRtKaZADSmmQA0ppkAP///wD///8A////AP///wDSmmQA0ppkANKaZADSmmQA0ppkANKaZGzSmmTu0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmTw0ppkcNKaZADSmmQA0ppkANKaZADSmmQA////AP///wD///8A////ANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZBLSmmSQ0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppklNKaZBTSmmQA0ppkANKaZADSmmQA0ppkANKaZAD///8A////AP///wD///8A0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQy0ppkutKaZP/SmmT/0ppk/9KaZP/SmmT/0ppk/9KaZP/SmmT/0ppkvtKaZDbSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkAP///wD///8A////AP///wDSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkXNKaZODSmmT/0ppk/9KaZP/SmmT/0ppk5NKaZGDSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA////AP///wD///8A////ANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkBtKaZIbSmmTo0ppk6tKaZIrSmmQK0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZADSmmQA0ppkANKaZAD///8A////AP/8P///+B///+AH//+AAf//AAD//AAAP/AAAA/gAAAHwAAAA8AAAAPAAAADwAAAA8AAAAPAAAADwAAAA8AAAAPAAAADwAAAA8AAAAPAAAADwAAAA8AAAAPAAAADwAAAA+AAAAfwAAAP/AAAP/8AAP//gAH//+AH///4H////D//" rel="icon" />
  
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
</head>
<body>
<div class="wrapper">
<header id="title-block-header">
<h1 class="title" style="text-align:center"><code class="sourceCode default">std::quantity</code>
as a numeric type</h1>
<table style="border:none;float:right">
  <tr>
    <td>Document #:</td>
    <td>P2982R0</td>
  </tr>
  <tr>
    <td>Date:</td>
    <td>2023-10-09</td>
  </tr>
  <tr>
    <td style="vertical-align:top">Project:</td>
    <td>Programming Language C++</td>
  </tr>
  <tr>
    <td style="vertical-align:top">Audience:</td>
    <td>
      SG6 Numerics<br>
    </td>
  </tr>
  <tr>
    <td style="vertical-align:top">Reply-to:</td>
    <td>
      Mateusz Pusz (<a href="http://www.epam.com">Epam
Systems</a>)<br>&lt;<a href="mailto:mateusz.pusz@gmail.com" class="email">mateusz.pusz@gmail.com</a>&gt;<br>
    </td>
  </tr>
</table>
</header>
<div style="clear:both">
<div id="TOC" role="doc-toc">
<h1 id="toctitle">Contents</h1>
<ul>
<li><a href="#introduction" id="toc-introduction"><span class="toc-section-number">1</span> Introduction<span></span></a></li>
<li><a href="#terms-and-definitions" id="toc-terms-and-definitions"><span class="toc-section-number">2</span>
Terms and definitions<span></span></a></li>
<li><a href="#operations-on-units-dimensions-and-quantity-types" id="toc-operations-on-units-dimensions-and-quantity-types"><span class="toc-section-number">3</span> Operations on units, dimensions, and
quantity types<span></span></a>
<ul>
<li><a href="#expression-templates" id="toc-expression-templates"><span class="toc-section-number">3.1</span> Expression
templates<span></span></a>
<ul>
<li><a href="#derived-entities" id="toc-derived-entities"><span class="toc-section-number">3.1.1</span> Derived
entities<span></span></a></li>
<li><a href="#identities" id="toc-identities"><span class="toc-section-number">3.1.2</span> Identities<span></span></a></li>
<li><a href="#supported-operations-and-their-results" id="toc-supported-operations-and-their-results"><span class="toc-section-number">3.1.3</span> Supported operations and their
results<span></span></a></li>
<li><a href="#simplifying-the-resulting-expression-templates" id="toc-simplifying-the-resulting-expression-templates"><span class="toc-section-number">3.1.4</span> Simplifying the resulting
expression templates<span></span></a></li>
<li><a href="#example" id="toc-example"><span class="toc-section-number">3.1.5</span> Example<span></span></a></li>
</ul></li>
<li><a href="#scaled-units" id="toc-scaled-units"><span class="toc-section-number">3.2</span> Scaled units<span></span></a>
<ul>
<li><a href="#unit-magnitudes" id="toc-unit-magnitudes"><span class="toc-section-number">3.2.1</span> Unit
Magnitudes<span></span></a></li>
<li><a href="#construction-helpers" id="toc-construction-helpers"><span class="toc-section-number">3.2.2</span> Construction
helpers<span></span></a></li>
<li><a href="#common-units" id="toc-common-units"><span class="toc-section-number">3.2.3</span> Common
units<span></span></a></li>
</ul></li>
<li><a href="#faster-than-lightspeed-constants" id="toc-faster-than-lightspeed-constants"><span class="toc-section-number">3.3</span> Faster than lightspeed
constants<span></span></a></li>
<li><a href="#equivalence" id="toc-equivalence"><span class="toc-section-number">3.4</span> Equivalence<span></span></a>
<ul>
<li><a href="#ordering" id="toc-ordering"><span class="toc-section-number">3.4.1</span> Ordering<span></span></a></li>
</ul></li>
</ul></li>
<li><a href="#quantity-specifications" id="toc-quantity-specifications"><span class="toc-section-number">4</span> Quantity
specifications<span></span></a>
<ul>
<li><a href="#quantity-kinds" id="toc-quantity-kinds"><span class="toc-section-number">4.1</span> Quantity kinds<span></span></a>
<ul>
<li><a href="#conversions" id="toc-conversions"><span class="toc-section-number">4.1.1</span>
Conversions<span></span></a></li>
<li><a href="#mutually-comparable-quantities" id="toc-mutually-comparable-quantities"><span class="toc-section-number">4.1.2</span> Mutually comparable
quantities<span></span></a></li>
</ul></li>
</ul></li>
<li><a href="#references" id="toc-references"><span class="toc-section-number">5</span> References<span></span></a>
<ul>
<li><a href="#associated-units" id="toc-associated-units"><span class="toc-section-number">5.1</span> Associated
Units<span></span></a></li>
</ul></li>
<li><a href="#quantities" id="toc-quantities"><span class="toc-section-number">6</span> Quantities<span></span></a></li>
<li><a href="#the-affine-space" id="toc-the-affine-space"><span class="toc-section-number">7</span> The affine
space<span></span></a></li>
<li><a href="#math-cpos" id="toc-math-cpos"><span class="toc-section-number">8</span> Math CPOs<span></span></a></li>
<li><a href="#acknowledgements" id="toc-acknowledgements"><span class="toc-section-number">9</span>
Acknowledgements<span></span></a></li>
<li><a href="#bibliography" id="toc-bibliography"><span class="toc-section-number">10</span> References<span></span></a></li>
</ul>
</div>
<h1 data-number="1" id="introduction"><span class="header-section-number">1</span> Introduction<a href="#introduction" class="self-link"></a></h1>
<p>This document discusses the numeric and arithmetic aspects of the
physical quantities and units library. This subject is broader than it
could be initially imagined. Arithmetic operations are not only defined
for user-facing types like
<code class="sourceCode default">quantity</code> and
<code class="sourceCode default">quantity_point</code>, but also for
units and their magnitudes, dimensions, quantity specifications, and
references. Each has its own requirements and constraints, and we will
describe them in the following chapters.</p>
<h1 data-number="2" id="terms-and-definitions"><span class="header-section-number">2</span> Terms and definitions<a href="#terms-and-definitions" class="self-link"></a></h1>
<p>This document consistently uses the official metrology vocabulary
defined in <span class="citation" data-cites="ISO-GUIDE">[<a href="#ref-ISO-GUIDE" role="doc-biblioref">ISO/IEC Guide 99</a>]</span>
and <span class="citation" data-cites="BIPM-VIM">[<a href="#ref-BIPM-VIM" role="doc-biblioref">JCGM 200:2012</a>]</span>.</p>
<h1 data-number="3" id="operations-on-units-dimensions-and-quantity-types"><span class="header-section-number">3</span> Operations on units, dimensions,
and quantity types<a href="#operations-on-units-dimensions-and-quantity-types" class="self-link"></a></h1>
<p>Modern C++ physical quantities and units library should expose
compile-time constants for units, dimensions, and quantity types. Each
of such constants should be of a different type. Said otherwise, every
unit, dimension, and quantity type has a unique type and a compile-time
instance. This allows us to do regular algebra on such identifiers and
get proper types results of such operations.</p>
<p>The operations exposed by such a library should include at least:</p>
<ul>
<li>multiplication
(e.g. <code class="sourceCode default">newton * metre</code>),</li>
<li>division
(e.g. <code class="sourceCode default">metre / second</code>),</li>
<li>power
(e.g. <code class="sourceCode default">pow&lt;2&gt;(metre)</code> or
<code class="sourceCode default">pow&lt;1, 2&gt;(metre * metre)</code>)</li>
</ul>
<p>To improve the usability of the library, we also recommend
adding:</p>
<ul>
<li>square root
(e.g. <code class="sourceCode default">sqrt(metre * metre)</code> is
equivalent to
<code class="sourceCode default">pow&lt;1, 2&gt;(metre * metre)</code>),</li>
<li>cubic root
(e.g. <code class="sourceCode default">cbrt(metre * metre * metre)</code>
is equivalent to <code class="sourceCode default">pow&lt;1, 3&gt;(metre * metre * metre)</code>),</li>
<li>inversion
(e.g. <code class="sourceCode default">inverse(second)</code> is
equivalent to
<code class="sourceCode default">one / second</code>).</li>
</ul>
<p>Additionally, for units only, to improve the readability of the code,
it makes sense to expose the following:</p>
<ul>
<li>square power
(e.g. <code class="sourceCode default">square(metre)</code> is
equivalent to
<code class="sourceCode default">pow&lt;2&gt;(metre)</code>)</li>
<li>cubic power
(e.g. <code class="sourceCode default">cubic(metre)</code> is equivalent
to <code class="sourceCode default">pow&lt;3&gt;(metre)</code>)</li>
</ul>
<p>The above two functions could also be considered for dimensions and
quantity types. However,
<code class="sourceCode default">cubic(length)</code> does not seem to
make much sense, and probably
<code class="sourceCode default">pow&lt;3&gt;(length)</code> should be
preferred instead.</p>
<h2 data-number="3.1" id="expression-templates"><span class="header-section-number">3.1</span> Expression templates<a href="#expression-templates" class="self-link"></a></h2>
<p>Modern C++ physical quantities and units libraries use opaque types
to improve the user experience while analyzing compile-time errors or
inspecting types in a debugger. This is a huge usability improvement
over the older libraries that use aliases to refer to long
instantiations of class templates.</p>
<h3 data-number="3.1.1" id="derived-entities"><span class="header-section-number">3.1.1</span> Derived entities<a href="#derived-entities" class="self-link"></a></h3>
<p>Having such strong types for entities is not enough. While doing
arithmetics on them, we get derived entities, and they also should be
easy to understand and correlate with the code written by the user. This
is where expression templates come into play.</p>
<p>The library should use the same unified approach to represent the
results of arithmetics on all kinds of entities. It is worth mentioning
that a generic purpose regular expression library is not a good solution
for a physical quantities and units library.</p>
<p>Let’s assume that we want to represent the results of the following
two unit equations:</p>
<ul>
<li><code class="sourceCode default">metre / second * second</code></li>
<li><code class="sourceCode default">metre * metre / metre</code></li>
</ul>
<p>Both of them should result in a type equivalent to
<code class="sourceCode default">metre</code>. A general-purpose library
will probably result with the types similar to the below:</p>
<ul>
<li><code class="sourceCode default">mul&lt;div&lt;metre, second&gt;, second&gt;</code></li>
<li><code class="sourceCode default">div&lt;mul&lt;metre, metre&gt;, metre&gt;</code></li>
</ul>
<p>Comparing such types for equivalence would not only be very expensive
at compile-time but would also be really confusing to the users
observing them in the compilation logs. This is why we need a dedicated
solution here.</p>
<p>In a physical quantities and units library, we need expression
templates to express the results of:</p>
<ul>
<li>dimension equations</li>
<li>quantity equations</li>
<li>unit equations</li>
</ul>
<p>If the above equation results in a derived entity, we must create a
type that clearly describes what we are dealing with. We need to pack a
simplified expression template into some container for that. There are
various possibilities here. The table below presents the types generated
from unit expressions by two leading products on the market in this
subject:</p>
<table style="width:100%;">
<colgroup>
<col style="width: 9%" />
<col style="width: 42%" />
<col style="width: 47%" />
</colgroup>
<thead>
<tr class="header">
<th><div style="text-align:center">
<strong>Unit</strong>
</div></th>
<th><div style="text-align:center">
<strong><span class="citation" data-cites="MP-UNITS">[<a href="#ref-MP-UNITS" role="doc-biblioref">mp-units</a>]</span></strong>
</div></th>
<th><div style="text-align:center">
<strong><span class="citation" data-cites="AU">[<a href="#ref-AU" role="doc-biblioref">Au</a>]</span></strong>
</div></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code class="sourceCode default">N⋅m</code></td>
<td><code class="sourceCode default">derived_unit&lt;metre, newton&gt;</code></td>
<td><code class="sourceCode default">UnitProduct&lt;Meters, Newtons&gt;</code></td>
</tr>
<tr class="even">
<td><code class="sourceCode default">1/s</code></td>
<td><code class="sourceCode default">derived_unit&lt;one, per&lt;second&gt;&gt;</code></td>
<td><code class="sourceCode default">Pow&lt;Seconds, -1&gt;</code></td>
</tr>
<tr class="odd">
<td><code class="sourceCode default">km/h</code></td>
<td><code class="sourceCode default">derived_unit&lt;kilo_&lt;metre&gt;, per&lt;hour&gt;&gt;</code></td>
<td><code class="sourceCode default">UnitProduct&lt;Kilo&lt;Meters&gt;, Pow&lt;Hours, -1&gt;&gt;</code></td>
</tr>
<tr class="even">
<td><code class="sourceCode default">kg⋅m²/(s³⋅K)</code></td>
<td><code class="sourceCode default">derived_unit&lt;kilogram, pow&lt;metre, 2&gt;, per&lt;kelvin, power&lt;second, 3&gt;&gt;&gt;</code></td>
<td><code class="sourceCode default">UnitProduct&lt;Pow&lt;Meters, 2&gt;, Kilo&lt;Grams&gt;, Pow&lt;Seconds, -3&gt;, Pow&lt;Kelvins, -1&gt;&gt;</code></td>
</tr>
<tr class="odd">
<td><code class="sourceCode default">m²/m</code></td>
<td><code class="sourceCode default">metre</code></td>
<td><code class="sourceCode default">Meters</code></td>
</tr>
<tr class="even">
<td><code class="sourceCode default">km/m</code></td>
<td><code class="sourceCode default">derived_unit&lt;kilo_&lt;metre&gt;, per&lt;metre&gt;&gt;</code></td>
<td><code class="sourceCode default">UnitProduct&lt;Pow&lt;Meters, -1&gt;, Kilo&lt;Meters&gt;&gt;</code></td>
</tr>
<tr class="odd">
<td><code class="sourceCode default">m/m</code></td>
<td><code class="sourceCode default">one</code></td>
<td><code class="sourceCode default">UnitProduct&lt;&gt;</code></td>
</tr>
</tbody>
</table>
<p>It is a matter of taste which solution is better. While discussing
the pros and cons here, we should remember that our users often do not
have a scientific background. This is why the <span class="citation" data-cites="MP-UNITS">[<a href="#ref-MP-UNITS" role="doc-biblioref">mp-units</a>]</span> library decided to use syntax
that is as similar to the correct English language as possible. It
consistently uses the <code class="sourceCode default">derived_</code>
prefix for types representing derived units, dimensions, and quantity
specifications. It always first lists the contents of the numerator
followed by the entities of the denominator (if present) enclosed in the
<code class="sourceCode default">per&lt;...&gt;</code> expression
template.</p>
<h3 data-number="3.1.2" id="identities"><span class="header-section-number">3.1.2</span> Identities<a href="#identities" class="self-link"></a></h3>
<p>The arithmetics on units, dimensions, and quantities require a
special identity value. Such value can be returned as a result of the
division of the same entities, or using it should not modify the
expression template on multiplication.</p>
<p>The <span class="citation" data-cites="MP-UNITS">[<a href="#ref-MP-UNITS" role="doc-biblioref">mp-units</a>]</span> library
chose the following names here:</p>
<ul>
<li><code class="sourceCode default">one</code> in the domain of
units,</li>
<li><code class="sourceCode default">dimension_one</code> in the domain
of dimensions,</li>
<li><code class="sourceCode default">dimensionless</code> in the domain
of quantity types.</li>
</ul>
<h3 data-number="3.1.3" id="supported-operations-and-their-results"><span class="header-section-number">3.1.3</span> Supported operations and
their results<a href="#supported-operations-and-their-results" class="self-link"></a></h3>
<p>The below template presents all the operations that can be done on
units, dimensions, and quantity types in a physical quantities and units
library and corresponding expressions templates chosen by the <span class="citation" data-cites="MP-UNITS">[<a href="#ref-MP-UNITS" role="doc-biblioref">mp-units</a>]</span> project as their results:</p>
<table>
<colgroup>
<col style="width: 53%" />
<col style="width: 46%" />
</colgroup>
<thead>
<tr class="header">
<th style="text-align: center;"><div style="text-align:center">
<strong>Operation</strong>
</div></th>
<th style="text-align: center;"><div style="text-align:center">
<strong>Resulting template expression arguments</strong>
</div></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><code class="sourceCode default">A * B</code></td>
<td style="text-align: center;"><code class="sourceCode default">A, B</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><code class="sourceCode default">B * A</code></td>
<td style="text-align: center;"><code class="sourceCode default">A, B</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code class="sourceCode default">A * A</code></td>
<td style="text-align: center;"><code class="sourceCode default">power&lt;A, 2&gt;</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><code class="sourceCode default">{identity} * A</code></td>
<td style="text-align: center;"><code class="sourceCode default">A</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code class="sourceCode default">A * {identity}</code></td>
<td style="text-align: center;"><code class="sourceCode default">A</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><code class="sourceCode default">A / B</code></td>
<td style="text-align: center;"><code class="sourceCode default">A, per&lt;B&gt;</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code class="sourceCode default">A / A</code></td>
<td style="text-align: center;"><code class="sourceCode default">{identity}</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><code class="sourceCode default">A / {identity}</code></td>
<td style="text-align: center;"><code class="sourceCode default">A</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code class="sourceCode default">{identity} / A</code></td>
<td style="text-align: center;"><code class="sourceCode default">{identity}, per&lt;A&gt;</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><code class="sourceCode default">pow&lt;2&gt;(A)</code></td>
<td style="text-align: center;"><code class="sourceCode default">power&lt;A, 2&gt;</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code class="sourceCode default">pow&lt;2&gt;({identity})</code></td>
<td style="text-align: center;"><code class="sourceCode default">{identity}</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><code class="sourceCode default">sqrt(A)</code>
or <code class="sourceCode default">pow&lt;1, 2&gt;(A)</code></td>
<td style="text-align: center;"><code class="sourceCode default">power&lt;A, 1, 2&gt;</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code class="sourceCode default">sqrt({identity})</code>
or
<code class="sourceCode default">pow&lt;1, 2&gt;({identity})</code></td>
<td style="text-align: center;"><code class="sourceCode default">{identity}</code></td>
</tr>
</tbody>
</table>
<h3 data-number="3.1.4" id="simplifying-the-resulting-expression-templates"><span class="header-section-number">3.1.4</span> Simplifying the resulting
expression templates<a href="#simplifying-the-resulting-expression-templates" class="self-link"></a></h3>
<p>To limit the length and improve the readability of generated types,
there are many rules to simplify the resulting expression template.</p>
<ol type="1">
<li><p><strong>Ordering</strong></p>
<p>The resulting comma-separated arguments of multiplication are always
sorted according to a specific predicate. This is why:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">static_assert</span><span class="op">(</span>A <span class="op">*</span> B <span class="op">==</span> B <span class="op">*</span> A<span class="op">)</span>;</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">static_assert</span><span class="op">(</span>std<span class="op">::</span>is_same_v<span class="op">&lt;</span><span class="kw">decltype</span><span class="op">(</span>A <span class="op">*</span> B<span class="op">)</span>, <span class="kw">decltype</span><span class="op">(</span>B <span class="op">*</span> A<span class="op">)&gt;)</span>;</span></code></pre></div>
<p>This is probably the most important of all the steps, as it allows
comparing types and enables the rest of the simplification rules.</p>
<p>Units and dimensions have unique symbols, but ordering quantity types
might not be that trivial. Although the ISQ defined in <span class="citation" data-cites="ISO80000">[<a href="#ref-ISO80000" role="doc-biblioref">ISO 80000</a>]</span> provides symbols for each
quantity, there is little use for them in the C++ code. This is caused
by the fact that such symbols use a lot of characters that are not
available with the Unicode encoding. Most of the limitations correspond
to Unicode providing only a minimal set of characters available as
subscripts, which are often used to differentiate various quantities of
the same kind. This is why the <span class="citation" data-cites="MP-UNITS">[<a href="#ref-MP-UNITS" role="doc-biblioref">mp-units</a>]</span> library uses type name
identifiers in such cases.</p></li>
<li><p><strong>Aggregation</strong></p>
<p>In case two of the same type identifiers are found next to each other
on the argument list, they will be aggregated in one entry:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;"><div style="text-align:center">
<strong>Before</strong>
</div></th>
<th style="text-align: center;"><div style="text-align:center">
<strong>After</strong>
</div></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><code class="sourceCode default">A, A</code></td>
<td style="text-align: center;"><code class="sourceCode default">power&lt;A, 2&gt;</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><code class="sourceCode default">A, power&lt;A, 2&gt;</code></td>
<td style="text-align: center;"><code class="sourceCode default">power&lt;A, 3&gt;</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code class="sourceCode default">power&lt;A, 1, 2&gt;, power&lt;A, 2&gt;</code></td>
<td style="text-align: center;"><code class="sourceCode default">power&lt;A, 5, 2&gt;</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><code class="sourceCode default">power&lt;A, 1, 2&gt;, power&lt;A, 1, 2&gt;</code></td>
<td style="text-align: center;"><code class="sourceCode default">A</code></td>
</tr>
</tbody>
</table></li>
<li><p><strong>Simplification</strong></p>
<p>In case two of the same type identifiers are found in the numerator
and denominator argument lists, they are being simplified into one
entry:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;"><div style="text-align:center">
<strong>Before</strong>
</div></th>
<th style="text-align: center;"><div style="text-align:center">
<strong>After</strong>
</div></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><code class="sourceCode default">A, per&lt;A&gt;</code></td>
<td style="text-align: center;"><code class="sourceCode default">{identity}</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><code class="sourceCode default">power&lt;A, 2&gt;, per&lt;A&gt;</code></td>
<td style="text-align: center;"><code class="sourceCode default">A</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code class="sourceCode default">power&lt;A, 3&gt;, per&lt;A&gt;</code></td>
<td style="text-align: center;"><code class="sourceCode default">power&lt;A, 2&gt;</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><code class="sourceCode default">A, per&lt;power&lt;A, 2&gt;&gt;</code></td>
<td style="text-align: center;"><code class="sourceCode default">{identity}, per&lt;A&gt;</code></td>
</tr>
</tbody>
</table>
<p>It is important to notice here that only the elements with exactly
the same type are being simplified. This means that, for example,
<code class="sourceCode default">m / m</code> results in
<code class="sourceCode default">one</code>, but
<code class="sourceCode default">km / m</code> will not be simplified.
The resulting derived unit will preserve both symbols and their relative
magnitude. This allows us to properly print symbols of some units or
constants that require such behavior. For example, the Hubble constant
is expressed in <code class="sourceCode default">km⋅s⁻¹⋅Mpc⁻¹</code>,
where both <code class="sourceCode default">km</code> and
<code class="sourceCode default">Mpc</code> are units of
length.</p></li>
<li><p><strong>Repacking</strong></p>
<p>In case an expression uses two results of other operations, the
components of its arguments are repacked into one resulting type and
simplified there.</p>
<p>For example, assuming:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">constexpr</span> <span class="kw">auto</span> X <span class="op">=</span> A <span class="op">/</span> B;</span></code></pre></div>
<p>then:</p>
<table>
<thead>
<tr class="header">
<th style="text-align: center;"><div style="text-align:center">
<strong>Operation</strong>
</div></th>
<th style="text-align: center;"><div style="text-align:center">
<strong>Resulting template expression arguments</strong>
</div></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><code class="sourceCode default">X * B</code></td>
<td style="text-align: center;"><code class="sourceCode default">A</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><code class="sourceCode default">X * A</code></td>
<td style="text-align: center;"><code class="sourceCode default">power&lt;A, 2&gt;, per&lt;B&gt;</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code class="sourceCode default">X * X</code></td>
<td style="text-align: center;"><code class="sourceCode default">power&lt;A, 2&gt;, per&lt;power&lt;B, 2&gt;&gt;</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><code class="sourceCode default">X / X</code></td>
<td style="text-align: center;"><code class="sourceCode default">{identity}</code></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><code class="sourceCode default">X / A</code></td>
<td style="text-align: center;"><code class="sourceCode default">{identity}, per&lt;B&gt;</code></td>
</tr>
<tr class="even">
<td style="text-align: center;"><code class="sourceCode default">X / B</code></td>
<td style="text-align: center;"><code class="sourceCode default">A, per&lt;power&lt;B, 2&gt;&gt;</code></td>
</tr>
</tbody>
</table></li>
</ol>
<p>Please note that for as long as for the ordering step in some cases,
we use user-provided symbols, the aggregation, and the next steps do not
benefit from those. They always use type identifiers to determine
whether the operation should be performed.</p>
<p>Unit symbols are not guaranteed to be unique in the project. For
example, someone may use
<code class="sourceCode default">&quot;s&quot;</code> as a symbol for a
count of samples, which, when used in a unit expression with seconds,
would cause fatal consequences
(e.g. <code class="sourceCode default">sample * second</code> would
yield <code class="sourceCode default">s²</code>, or
<code class="sourceCode default">sample / second</code> would result in
<code class="sourceCode default">one</code>).</p>
<p>Some units would provide worse text output if the ordering step used
type identifiers rather than unit symbols. For example, <code class="sourceCode default">si::metre * si::second * cgs::second</code>
would result in <code class="sourceCode default">s m s</code>, or
<code class="sourceCode default">newton * metre</code> would result in
<code class="sourceCode default">m N</code>, which is not how we
typically spell this unit. However, for the sake of consistency, we may
also consider changing the algorithm used for ordering to be based on
type identifiers.</p>
<h3 data-number="3.1.5" id="example"><span class="header-section-number">3.1.5</span> Example<a href="#example" class="self-link"></a></h3>
<p>Thanks to all of the steps described above, a user may write the code
like this one:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">using</span> <span class="kw">namespace</span> mp_units<span class="op">::</span>si<span class="op">::</span>unit_symbols;</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> speed <span class="op">=</span> isq<span class="op">::</span>speed<span class="op">(</span><span class="fl">60.</span> <span class="op">*</span> km <span class="op">/</span> h<span class="op">)</span>;</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> duration <span class="op">=</span> <span class="dv">8</span> <span class="op">*</span> s;</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="kw">auto</span> acceleration <span class="op">=</span> speed <span class="op">/</span> duration;</span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>std<span class="op">::</span>cout <span class="op">&lt;&lt;</span> <span class="st">&quot;acceleration: &quot;</span> <span class="op">&lt;&lt;</span> acceleration <span class="op">&lt;&lt;</span> <span class="st">&quot; (&quot;</span> <span class="op">&lt;&lt;</span> acceleration<span class="op">.</span>in<span class="op">(</span>m <span class="op">/</span> s2<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="st">&quot;)</span><span class="sc">\n</span><span class="st">&quot;</span>;</span></code></pre></div>
<p>The <code class="sourceCode default">acceleration</code>, being the
result of the above code, has the following type (after stripping the
<code class="sourceCode default">mp_units</code> namespace for
brevity):</p>
<pre class="text"><code>quantity&lt;reference&lt;derived_quantity_spec&lt;isq::speed, per&lt;isq::time&gt;&gt;{}, derived_unit&lt;si::kilo_&lt;si::metre{}&gt;, per&lt;non_si::hour, si::second&gt;&gt;{}&gt;{}, int&gt;</code></pre>
<p>and the text output provides:</p>
<pre class="text"><code>acceleration: 7.5 km h⁻¹ s⁻¹ (2.08333 m/s²)</code></pre>
<h2 data-number="3.2" id="scaled-units"><span class="header-section-number">3.2</span> Scaled units<a href="#scaled-units" class="self-link"></a></h2>
<h3 data-number="3.2.1" id="unit-magnitudes"><span class="header-section-number">3.2.1</span> Unit Magnitudes<a href="#unit-magnitudes" class="self-link"></a></h3>
<p>TBD</p>
<h3 data-number="3.2.2" id="construction-helpers"><span class="header-section-number">3.2.2</span> Construction helpers<a href="#construction-helpers" class="self-link"></a></h3>
<h3 data-number="3.2.3" id="common-units"><span class="header-section-number">3.2.3</span> Common units<a href="#common-units" class="self-link"></a></h3>
<h2 data-number="3.3" id="faster-than-lightspeed-constants"><span class="header-section-number">3.3</span> Faster than lightspeed
constants<a href="#faster-than-lightspeed-constants" class="self-link"></a></h2>
<h2 data-number="3.4" id="equivalence"><span class="header-section-number">3.4</span> Equivalence<a href="#equivalence" class="self-link"></a></h2>
<p>Units, dimensions, and quantity types can be checked for equivalence
with <code class="sourceCode default">operator==</code>. However, what
it means to be an equivalent entity means something different for each
case here.</p>
<p>…</p>
<h3 data-number="3.4.1" id="ordering"><span class="header-section-number">3.4.1</span> Ordering<a href="#ordering" class="self-link"></a></h3>
<p>Please note that ordering for dimensions and quantity types has no
physical sense.</p>
<p>We could entertain adding ordering for units, but this would work
only for quantities having the same reference unit, which would be
inconsistent with how equivalence works.</p>
<p>Let’s see the following example:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">constexpr</span> Unit <span class="kw">auto</span> my_unit <span class="op">=</span> si<span class="op">::</span>second;</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">constexpr</span> <span class="op">(</span>my_unit <span class="op">==</span> si<span class="op">::</span>metre<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ...</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">constexpr</span> <span class="op">(</span>my_unit <span class="op">&gt;</span> si<span class="op">::</span>metre<span class="op">)</span> <span class="op">{</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ...</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="kw">constexpr</span> <span class="op">(</span>my_unit <span class="op">&gt;</span> si<span class="op">::</span>nano<span class="op">(</span>si<span class="op">::</span>second<span class="op">))</span> <span class="op">{</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="co">// ...</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>The first check is useful for some use cases in the above code.
However, the second one is impossible to implement and should not
compile. The third one could be considered useful, but the current
version of <span class="citation" data-cites="MP-UNITS">[<a href="#ref-MP-UNITS" role="doc-biblioref">mp-units</a>]</span> does not
expose such an interface to limit potential confusion.</p>
<h1 data-number="4" id="quantity-specifications"><span class="header-section-number">4</span> Quantity specifications<a href="#quantity-specifications" class="self-link"></a></h1>
<h2 data-number="4.1" id="quantity-kinds"><span class="header-section-number">4.1</span> Quantity kinds<a href="#quantity-kinds" class="self-link"></a></h2>
<h3 data-number="4.1.1" id="conversions"><span class="header-section-number">4.1.1</span> Conversions<a href="#conversions" class="self-link"></a></h3>
<h3 data-number="4.1.2" id="mutually-comparable-quantities"><span class="header-section-number">4.1.2</span> Mutually comparable
quantities<a href="#mutually-comparable-quantities" class="self-link"></a></h3>
<h4 data-number="4.1.2.1" id="common_quantity_spec"><span class="header-section-number">4.1.2.1</span>
<code class="sourceCode default">common_quantity_spec</code><a href="#common_quantity_spec" class="self-link"></a></h4>
<h1 data-number="5" id="references"><span class="header-section-number">5</span> References<a href="#references" class="self-link"></a></h1>
<h2 data-number="5.1" id="associated-units"><span class="header-section-number">5.1</span> Associated Units<a href="#associated-units" class="self-link"></a></h2>
<h1 data-number="6" id="quantities"><span class="header-section-number">6</span> Quantities<a href="#quantities" class="self-link"></a></h1>
<ul>
<li>quantity constructors and conversions (value preserving
approach)</li>
<li>exceptions and special cases for dimensionless quantities</li>
<li>quantity arithmetics + quirks of modulo arithmetic and integral
division</li>
<li>custom representation types (improve safety, provide additional info
like measurement, linear algebra, minimal requirements)</li>
<li>representation type constraints</li>
<li>vector quantities and their operations</li>
<li>non-negative quantities</li>
</ul>
<h1 data-number="7" id="the-affine-space"><span class="header-section-number">7</span> The affine space<a href="#the-affine-space" class="self-link"></a></h1>
<h1 data-number="8" id="math-cpos"><span class="header-section-number">8</span> Math CPOs<a href="#math-cpos" class="self-link"></a></h1>
<h1 data-number="9" id="acknowledgements"><span class="header-section-number">9</span> Acknowledgements<a href="#acknowledgements" class="self-link"></a></h1>
<p>Special thanks and recognition goes to <a href="http://www.epam.com">Epam Systems</a> for supporting Mateusz’s
membership in the ISO C++ Committee and the production of this
proposal.</p>
<!-- markdownlint-disable -->
<h1 data-number="10" id="bibliography"><span class="header-section-number">10</span> References<a href="#bibliography" class="self-link"></a></h1>
<div id="refs" class="references csl-bib-body hanging-indent" role="doc-bibliography">
<div id="ref-AU" class="csl-entry" role="doc-biblioentry">
[Au] The Au Units library. <a href="https://aurora-opensource.github.io/au"><div class="csl-block">https://aurora-opensource.github.io/au</div></a>
</div>
<div id="ref-ISO80000" class="csl-entry" role="doc-biblioentry">
[ISO 80000] ISO80000: Quantities and units. <a href="https://www.iso.org/standard/76921.html"><div class="csl-block">https://www.iso.org/standard/76921.html</div></a>
</div>
<div id="ref-ISO-GUIDE" class="csl-entry" role="doc-biblioentry">
[ISO/IEC Guide 99] ISO/IEC Guide 99: International vocabulary of
metrology — Basic and general concepts and associated terms (VIM). <a href="https://www.iso.org/obp/ui#iso:std:iso-iec:guide:99"><div class="csl-block">https://www.iso.org/obp/ui#iso:std:iso-iec:guide:99</div></a>
</div>
<div id="ref-BIPM-VIM" class="csl-entry" role="doc-biblioentry">
[JCGM 200:2012] International vocabulary of metrology - Basic and
general concepts and associated terms (VIM) (JCGM 200:2012, 3rd
edition). <a href="https://jcgm.bipm.org/vim/en"><div class="csl-block">https://jcgm.bipm.org/vim/en</div></a>
</div>
<div id="ref-MP-UNITS" class="csl-entry" role="doc-biblioentry">
[mp-units] mp-units - A Physical Quantities and Units library for C++.
<a href="https://mpusz.github.io/mp-units"><div class="csl-block">https://mpusz.github.io/mp-units</div></a>
</div>
</div>
</div>
</div>
</body>
</html>
